#!bin/bash
#Ingest.adcps-jln_recovered         /omc_data/whoi/OMC/GP03FLMB/R00001/adcp/*.000          GP03FLMB-RIS02-01-ADCPSL000

#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-03-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-04-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-05-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-06-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-07-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-08-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-09-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-10-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-11-CTDMOG000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-12-CTDMOH000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-13-CTDMOH000
#Ingest.ctdmo-ghqr_recovered        /omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex       GP03FLMB-RIS02-14-CTDMOH000

#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-03-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-04-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-05-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-06-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-07-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-08-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-09-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-10-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-11-CTDMOG000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-12-CTDMOH000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-13-CTDMOH000
#Ingest.ctdmo-ghqr-sio_recovered    /omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT      GP03FLMB-RIS02-14-CTDMOH000

#Ingest.dosta-abcdjm-sio_recovered  /omc_data/whoi/OMC/GP03FLMB/R00001/dosta/DOS*.DAT      GP03FLMB-RIS01-03-DOSTAD000

#Ingest.flort-dj-sio_recovered      /omc_data/whoi/OMC/GP03FLMB/R00001/flort/FLO*.DAT            GP03FLMB-RIS01-01-FLORTD000

#Ingest.phsen-abcdef_recovered      /omc_data/whoi/OMC/GP03FLMB/R00001/sami/SAMI*.txt      GP03FLMB-RIS01-02-PHSENE000

#Ingest.sio-eng-sio_recovered       /omc_data/whoi/OMC/GP03FLMB/R00001/*_SIOC/status/STA*.DAT  GP03FLMB-FM001-00-ENG000000

NGS=/home/developer/uframes/ooi/bin/ingestsender
INGESTLOG=/home/wdk/race/log/wfp-CP02PMCO-rcvr-command.log
INGESTLOGT=/home/wdk/race/log/wfp-CP02PMCO-rcvr-command.log-T
EDEXSRV=/home/developer/uframes/ooi/bin/edex-server
source $EDEXSRV

EDEXLOGDIR=/home/developer/uframes/ooi/uframe-1.0/edex/logs
EDEXLOGFILES=$(ls $EDEXLOGDIR/edex-ooi*.log)

date
echo "starting wfp-GP03FLMB-rcvr.sh"

#Files of the type:
ADCP_000=/omc_data/whoi/OMC/GP03FLMB/R00001/adcp/*.000

HEX_SBE=/omc_data/whoi/OMC/GP03FLMB/R00001/mc/SBE37*.hex
DAT_CTD=/omc_data/whoi/OMC/GP03FLMB/R00001/ctdmo/CTD*.DAT

DAT_DOS=/omc_data/whoi/OMC/GP03FLMB/R00001/dosta/DOS*.DAT
DAT_FLO=/omc_data/whoi/OMC/GP03FLMB/R00001/flort/FLO*.DAT
DAT_STA=/omc_data/whoi/OMC/GP03FLMB/R00001/*_SIOC/status/STA*.DAT
TXT_SAM=/omc_data/whoi/OMC/GP03FLMB/R00001/SAMI/sami*.txt


#Pick up the files:
ADCP_000_files=$(find $ADCP_000 -print)

HEX_SBE_files=$(find $HEX_SBE -print)
DAT_CTD_files=$(find $DAT_CTD -print)

DAT_DOS_files=$(find $DAT_DOS -print)
DAT_FLO_files=$(find $DAT_FLO -print)
DAT_STA_files=$(find $DAT_STA -print)
TXT_SAM_files=$(find $TXT_SAM -print)

#Command generation:

#Ingest.adcps-jln_recovered         /omc_data/whoi/OMC/GP03FLMB/R00001/adcp/*.000          GP03FLMB-RIS02-01-ADCPSL000
for files in $ADCP_000_files
do
    if  grep --quiet $files $EDEXLOGFILES; then
        echo "move on" > /dev/null
    else
        ls -l $files
        echo $INGS Ingest.adcps-jln_recovered $files GP03FLMB-RIS02-01-ADCPSL000 recovered
             $INGS Ingest.adcps-jln_recovered $files GP03FLMB-RIS02-01-ADCPSL000 recovered
        sleep 3
    fi
done

################################################  unknown  ##############################################












#########################################################################################################






#Ingest.dosta-abcdjm-sio_recovered  /omc_data/whoi/OMC/GP03FLMB/R00001/dosta/DOS*.DAT      GP03FLMB-RIS01-03-DOSTAD000
for files in $DAT_DOS_files
do
    if  grep --quiet $files $EDEXLOGFILES; then
        echo "move on" > /dev/null
    else
        ls -l $files
        echo $INGS Ingest.dosta-abcdjm-sio_recovered $files GP03FLMB-RIS01-03-DOSTAD000 recovered
             $INGS Ingest.dosta-abcdjm-sio_recovered $files GP03FLMB-RIS01-03-DOSTAD000 recovered
        sleep 3
    fi
done

#Ingest.flort-dj-sio_recovered      /omc_data/whoi/OMC/GP03FLMB/R00001/FLO*.DAT            GP03FLMB-RIS01-01-FLORTD000
for files in $DAT_FLO_files
do
    if  grep --quiet $files $EDEXLOGFILES; then
        echo "move on" > /dev/null
    else
        ls -l $files
        echo $INGS Ingest.flort-dj-sio_recovered $files GP03FLMB-RIS01-01-FLORTD000 recovered
             $INGS Ingest.flort-dj-sio_recovered $files GP03FLMB-RIS01-01-FLORTD000 recovered
        sleep 3
    fi
done

#Ingest.phsen-abcdef_recovered      /omc_data/whoi/OMC/GP03FLMB/R00001/sami/SAMI*.txt      GP03FLMB-RIS01-02-PHSENE000
for files in $TXT_SAM_files
do
    if  grep --quiet $files $EDEXLOGFILES; then
        echo "move on" > /dev/null
    else
        ls -l $files
        echo $INGS Ingest.phsen-abcdef_recovered $files GP03FLMB-RIS01-02-PHSENE000 recovered
             $INGS Ingest.phsen-abcdef_recovered $files GP03FLMB-RIS01-02-PHSENE000 recovered
        sleep 3
    fi
done

#Ingest.sio-eng-sio_recovered       /omc_data/whoi/OMC/GP03FLMB/R00001/*_SIOC/status/STA*.DAT  GP03FLMB-FM001-00-ENG000000
for files in $DAT_STA_files
do
    if  grep --quiet $files $EDEXLOGFILES; then
        echo "move on" > /dev/null
    else
        ls -l $files
        echo $INGS Ingest.sio-eng-sio_recovered $files GP03FLMB-FM001-00-ENG000000 recovered
             $INGS Ingest.sio-eng-sio_recovered $files GP03FLMB-FM001-00-ENG000000 recovered
        sleep 3
    fi
done

date
echo "ended GP03FLMB.sh"















